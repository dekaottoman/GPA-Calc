<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Gemunu+Libre:wght@200;600;800&display=swap" rel="stylesheet"> 
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.2.0/css/all.min.css">
    <link rel="stylesheet" href="style.css">
    <title>GPA Calculator</title>
</head>
<body onload="display_table('course_table')">
    <nav class="topbar">
        <ul>
            <li>
                <button class="btn-top">How to Use?</button>
            </li>
            <li>
                <a class="btn-top">Grade Calculator</a>
            </li>
        </ul>
    </nav>

    <div class="courses">
        <h2 class="lbl">Course Info</h2>
        <table id="course-table">
            <thead>
                <th>Course Name</th>
                <th>Credit</th>
                <th>Grade</th>
            </thead>
            <tbody id="course_table">
                <!--
                <tr>
                    <td><input type="text" name="" id="" placeholder="course name"></td>
                    <td><input type="number" name="" id="" value="0"></td>
                    <td>
                        <select name="" id="">
                            <option value="A">A</option>
                            <option value="A-">A-</option>
                            <option value="B+">B+</option>
                            <option value="B">B</option>
                            <option value="B-">B-</option>
                            <option value="C+">C+</option>
                            <option value="C">C</option>
                            <option value="C-">C-</option>
                            <option value="D+">D+</option>
                            <option value="D">D</option>
                            <option value="D-">D-</option>
                            <option value="F">F</option>
                        </select>
                    </td>
                </tr>
                <tr>
                    <td><input type="text" name="" id="" placeholder="course name"></td>
                    <td><input type="number" name="" id="" value="0"></td>
                    <td>
                        <select name="" id="">
                            <option value="A">A</option>
                            <option value="A-">A-</option>
                            <option value="B+">B+</option>
                            <option value="B">B</option>
                            <option value="B-">B-</option>
                            <option value="C+">C+</option>
                            <option value="C">C</option>
                            <option value="C-">C-</option>
                            <option value="D+">D+</option>
                            <option value="D">D</option>
                            <option value="D-">D-</option>
                            <option value="F">F</option>
                        </select>
                    </td>
                </tr>
                <tr>
                    <td><input type="text" name="" id="" placeholder="course name"></td>
                    <td><input type="number" name="" id="" value="0"></td>
                    <td>
                        <select name="" id="">
                            <option value="A">A</option>
                            <option value="A-">A-</option>
                            <option value="B+">B+</option>
                            <option value="B">B</option>
                            <option value="B-">B-</option>
                            <option value="C+">C+</option>
                            <option value="C">C</option>
                            <option value="C-">C-</option>
                            <option value="D+">D+</option>
                            <option value="D">D</option>
                            <option value="D-">D-</option>
                            <option value="F">F</option>
                        </select>
                    </td>
                </tr>
                <tr>
                    <td><input type="text" name="" id="" placeholder="course name"></td>
                    <td><input type="number" name="" id="" value="0"></td>
                    <td>
                        <select name="" id="">
                            <option value="A">A</option>
                            <option value="A-">A-</option>
                            <option value="B+">B+</option>
                            <option value="B">B</option>
                            <option value="B-">B-</option>
                            <option value="C+">C+</option>
                            <option value="C">C</option>
                            <option value="C-">C-</option>
                            <option value="D+">D+</option>
                            <option value="D">D</option>
                            <option value="D-">D-</option>
                            <option value="F">F</option>
                        </select>
                    </td>
                </tr>
                -->
            </tbody>
        </table>
        <div class="buttons">
            <button class="btn" onclick="add_course('course_table')"><i class="fa-sharp fa-solid fa-plus"></i></button>
            <button class="btn" onclick="calc_gpa('gpa_display')">Calculate</button>
            <button class="btn" onclick="remove_course('course_table')"><i class="fa-sharp fa-solid fa-minus"></i></button>
        </div>
        <input type="checkbox" name="letter-checkbox" id="letter-checkbox">
       <label for="letter-checkbox" class="letter-lbl">Letters</label>
       
       <div class="letters">
            <table>
                <tbody>
                    <tr>
                        <th>A</th>
                        <th>A-</th>
                        <th>B+</th>
                        <th>B</th>
                    </tr>
                    <tr>
                        <td><input type="number" id="L0" value="4"></td>
                        <td><input type="number" id="L1" value="3.7"></td>
                        <td><input type="number" id="L2" value="3.3"></td>
                        <td><input type="number" id="L3" value="3"></td>
                    </tr>
                    <tr>
                        <th>B-</th>
                        <th>C+</th>
                        <th>C</th>
                        <th>C-</th>
                    </tr>
                    <tr>
                        <td><input type="number" id="L4" value="2.7"></td>
                        <td><input type="number" id="L5" value="2.3"></td>
                        <td><input type="number" id="L6" value="2"></td>
                        <td><input type="number" id="L7" value="1.7"></td>
                    </tr>
                    <tr>
                        <th>D+</th>
                        <th>D</th>
                        <th>D-</th>
                        <th>F</th>
                    </tr>
                    <tr>
                        <td><input type="number" id="L8" value="1.3"></td>
                        <td><input type="number" id="L9" value="1"></td>
                        <td><input type="number" id="L10" value="0.7"></td>
                        <td><input type="number" id="L11" disabled="disabled" value="0" style="background-color: rgba(132, 129, 122,0.7);"></td>
                    </tr>
                </tbody>
            </table>
       </div>
       <h2 class="lbl" id="gpa_display">&nbsp;</h2>
    </div>

</body>
<script type="text/javascript">

    var course_count = 5;

    function create_row(index){
        var row = "<tr><td><input type='text' id='c_name"+ index +"' placeholder='course name'></td><td><input type='number' id='credit"+ index +"' value='0'></td><td><select id='letter" + index + "'><option value='A'>A</option><option value='A-'>A-</option><option value='B+'>B+</option><option value='B'>B</option><option value='B-'>B-</option><option value='C+'>C+</option><option value='C'>C</option><option value='C-'>C-</option><option value='D+'>D+</option><option value='D'>D</option><option value='D-'>D-</option><option value='F'>F</option></select></td></tr>"
        return row;
    }

    function create_table(){
        var table = "";
        for(var i=0;i<course_count;i++){
            table += create_row(i);
        }
        return table;
    }
    
    function display_table(display_id){
        document.getElementById(display_id).innerHTML = create_table();
    }

    function add_course(display_id){
            course_count++;
            display_table(display_id);
    }

    function remove_course(display_id){
        if(course_count>2){
            course_count--;
            display_table(display_id);
        }
        else{
            alert("Cannot have less than 2 courses.");
        }
    }

    function get_credit(index){
        var credit_id = "credit" + index;
        var e = document.getElementById(credit_id);
        return e.value;
    }

    function grade_lookup(grade){
        L0 = Number(document.getElementById("L0").value)
        L1 = Number(document.getElementById("L1").value)
        L2 = Number(document.getElementById("L2").value)
        L3 = Number(document.getElementById("L3").value)
        L4 = Number(document.getElementById("L4").value)
        L5 = Number(document.getElementById("L5").value)
        L6 = Number(document.getElementById("L6").value)
        L7 = Number(document.getElementById("L7").value)
        L8 = Number(document.getElementById("L8").value)
        L9 = Number(document.getElementById("L9").value)
        L10 = Number(document.getElementById("L10").value)
        L11 = Number(document.getElementById("L11").value)
        letter_value = [L0,L1,L2,L3,L4,L5,L6,L7,L8,L9,L10,L11]
        
        if(grade == "A"){
            return L0;
        }
        else if(grade == "A-"){
            return L1;
        }
        else if(grade == "B+"){
            return L2;
        }
        else if(grade == "B"){
            return L3;
        }
        else if(grade == "B-"){
            return L4;
        }
        else if(grade == "C+"){
            return L5;
        }
        else if(grade == "C"){
            return L6;
        }
        else if(grade == "C-"){
            return L7;
        }
        else if(grade == "D+"){
            return L8;
        }
        else if(grade == "D"){
            return L9;
        }
        else if(grade == "D-"){
            return L10;
        }
        else if(grade == "F"){
            return L11;
        }
    }

    function get_grade(index){
        var grade_id = "letter" + index;
        var e = document.getElementById(grade_id);
        return e.value;
    }
    
    function calc_gpa(display_id){
        var grade,credit,val,sum = 0, total_credit = 0;
        
        for(var i = 0; i<course_count;i++){
            grade = get_grade(i);
            grade = grade_lookup(grade);

            credit = get_credit(i);

            total_credit += Number(credit);
            sum += credit * grade;
        }

        var gpa = (sum/total_credit).toFixed(2);

        if(total_credit > 0){
            document.getElementById(display_id).innerText = gpa;
        }
        else{
            document.getElementById(display_id).innerText = "No credits found!";
        }
    }

</script>
</html>

